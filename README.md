# üè¶ OCR –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤. Decentrathon 4.0. –í—Ç–æ—Ä–æ–π –∫–µ–π—Å –æ—Ç BCC.

**–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è OCR-—Å–∏—Å—Ç–µ–º–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF**

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ - —Å–∏—Å—Ç–µ–º–∞ OCR 2.0, –∫–æ—Ç–æ—Ä–∞—è –º—ã –Ω–∞–¥–µ–µ–º—Å—è –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç –±–∞–∑–æ–≤—ã–π Tesseract –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤. –°–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å–æ –í–°–ï–• —Å—Ç—Ä–∞–Ω–∏—Ü PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LLM –¥–ª—è –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∏.

### üöÄ –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–¢–æ–ª—å–∫–æ PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã** - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- **–ú–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–¥–æ 20 —Å—Ç—Ä–∞–Ω–∏—Ü)
- **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π OCR** - PaddleOCR —Å —Ä—É—Å—Å–∫–æ–π –º–æ–¥–µ–ª—å—é –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π
- **LLM –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ gemma3:1b –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —É–¥–æ–±–Ω—ã–π Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### üìä –ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ –ø–æ–ª—è

- **contract_date** - –¥–∞—Ç–∞ –∑–∞–∫–ª—é—á–µ–Ω–∏—è (–¥–∞—Ç–∞ –∑–∞–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)
- **expiration_date** - –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –¥–æ–≥–æ–≤–æ—Ä–∞)  
- **counterparty** - –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç (–Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞)
- **country** - —Å—Ç—Ä–∞–Ω–∞ (—Å—Ç—Ä–∞–Ω–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ (–∏–Ω–æ–ø–∞—Ä—Ç–Ω–µ—Ä–∞))
- **contract_amount** - —Å—É–º–º–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (—á–∏—Å–ª–æ –±–µ–∑ –≤–∞–ª—é—Ç—ã)
- **contract_currency** - –≤–∞–ª—é—Ç–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- **payment_currency** - –≤–∞–ª—é—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **OCR**: PaddleOCR 
- **LLM**: Ollama + gemma3:1b (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º, –≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª–µ–µ —É–º–Ω–æ–π –∏ —Ç–æ—á–Ω–æ–π –º–æ–¥–µ–ª–∏ LLM)
- **PDF –æ–±—Ä–∞–±–æ—Ç–∫–∞**: pdf2image + PyMuPDF (fallback)
- **UI**: Streamlit
- **Computer Vision**: OpenCV, PIL

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Python

```bash
```markdown
# üè¶ OCR 2.0 –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (PDF only)

## üë• –ö–æ–º–∞–Ω–¥–∞
- –ö–æ–º–∞–Ω–¥–∞: ¬´sudo rm -rf /¬ª
- –£—á–∞—Å—Ç–Ω–∏–∫–∏: –î–º–∏—Ç—Ä–∏–π –ü–∞–ª–∏–µ–≤, –ú–∏—Ö–∞–∏–ª –ñ–µ—Ä–µ–±—Ü–æ–≤

## üõ† –ö—Ä–∞—Ç–∫–∏–π —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- Streamlit (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- PyMuPDF (–ø—Ä—è–º–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ PDF —Å –ø–æ—Ä—è–¥–∫–æ–º –±–ª–æ–∫–æ–≤)
- PaddleOCR (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫; OCR fallback)
- OpenCV + PIL (–ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, CLAHE/deskew)
- Ollama + gemma3:1b (LLM –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è 8 –ø–æ–ª–µ–π –≤ JSON)

–ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ –ø–æ–ª—è JSON:
- contract_number, contract_date, expiration_date, counterparty, country,
  contract_amount, contract_currency, payment_currency

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å
1) –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (fish shell):
```fish
cd /home/mikhail/projects/hackathon
python3 -m venv venv
source venv/bin/activate.fish
pip install -r requirements.txt
```
2) –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—â–µ–Ω Ollama –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –º–æ–¥–µ–ª—å (–∫–æ—Ç–æ—Ä—É—é –≤—ã –≤—ã–±—Ä–∞–ª–∏):
```bash
ollama serve
ollama pull gemma3:1b 
```
3) –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```fish
source venv/bin/activate.fish
python3 -m streamlit run src/app.py
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:8501

(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞)
```fish
python3 -m streamlit run src/app.py --server.headless true --server.port 8501
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∫—Ä–∞—Ç–∫–æ)
```
src/
  app.py              # Streamlit UI (PDF only, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OCR –≤ —Å–∞–π–¥–±–∞—Ä–µ)
  ollama_client.py    # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Ollama 
  pipeline/
    pdf_utils.py      # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞: direct ‚Üí OCR fallback
    ocr.py            # PaddleOCR + –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫
    preprocess.py     # –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ (deskew, CLAHE, —Ä–µ–∑–∫–æ—Å—Ç—å)
requirements.txt
README.md
.gitignore
```

## ‚ÑπÔ∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- –ü—Ä—è–º–æ–π —Ç–µ–∫—Å—Ç –∏–∑ PDF –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –æ–Ω –Ω–µ ¬´–±–∏—Ç—ã–π¬ª. –ò–Ω–∞—á–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è OCR —Å —É—Å–∏–ª–µ–Ω–Ω–æ–π –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–æ–π (–ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ).
- –î–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ OCR –º–æ–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å DPI (–¥–æ 400) –∏ –≤–∫–ª—é—á–∏—Ç—å ¬´–£—Å–∏–ª–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è —Å–∫–∞–Ω–æ–≤¬ª –≤ —Å–∞–π–¥–±–∞—Ä–µ.
